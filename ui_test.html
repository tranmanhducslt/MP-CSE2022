<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>G15 UI check</title>
        <link rel="stylesheet" href="style_ui.css">
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="module">
      import data from './data.json' assert {type: 'json'};
      var jsondata = data;
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['hours', 'humid(%)'],
          ['3',  80],
          ['6',  90],
          ['9',  60],
          ['12', 50],
          ['15', 65],
          ['18', 72],
          ['21', 55],
          ['24', 60]
        ]);

        var options = {
          title: 'Humidity',
          curveType: 'function',
          legend: { position: 'bottom' },
          
        };

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart1'));

        chart.draw(data, options);
      }
    </script>
    <script type="module">
      import data from './data.json' assert {type: 'json'};
      var jsondata = data;
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);
  
        function drawChart() {
          var data = google.visualization.arrayToDataTable([
            ['hours', 'Temperature(C)'],
            ['3',  20],
            ['6',  23],
            ['9',  27],
            ['12', 16],
            ['15', 30],
            ['18', 34],
            ['21', 25],
            ['24', 27]
          ]);
  
          var options = {
            title: 'Temperature',
            curveType: 'function',
            legend: { position: 'bottom' },
            
          };
  
          var chart = new google.visualization.LineChart(document.getElementById('curve_chart2'));
  
          chart.draw(data, options);
        }
    </script>
           
    <script type="module">
      import data from './data.json' assert {type: 'json'};
      var jsondata = data;
        google.charts.load('current', {'packages':['gauge']});
        google.charts.setOnLoadCallback(drawChart);
  
        function drawChart() {
  
          var data = google.visualization.arrayToDataTable([
            ['Label', 'Value'],
            ['Humidity(%)', 80]
          ]);
  
          var options = {
            width: 400, height: 120,
            yellowFrom: 90, yellowTo: 100,
            redFrom: 0, redTo: 40,
            minorTicks: 5,
           
          };
  
          var chart = new google.visualization.Gauge(document.getElementById('chart_div1'));
  
          chart.draw(data, options);
  
          setInterval(function() {
            data.setValue(0, 1, 0 + Math.round(100 * Math.random()));
            chart.draw(data, options);
          }, 13000);
        
        }
    </script>
    <script type="module">
      import data from './data.json' assert {type: 'json'};
      var jsondata = data;
        google.charts.load('current', {'packages':['gauge']});
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
  
            var data = google.visualization.arrayToDataTable([
                ['Label', 'Value'],
                ['Temperature(C)', 20]
            ]);

            var options = {
                width: 400, height: 120,
                yellowFrom: 30, yellowTo: 35,
                redFrom: 15, redTo: 20,
                minorTicks: 10,
                max: 35,
                min: 15,
                
            };

            var chart = new google.visualization.Gauge(document.getElementById('chart_div2'));

            chart.draw(data, options);

            setInterval(function() {
                data.setValue(0, 1, 15 + Math.round(20 * Math.random()));
                chart.draw(data, options);
            }, 13000);
            
            }
    </script>
    <script type="module">
      import data from './data.json' assert {type: 'json'};
      var jsonData = data;
      function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      }
      sleep(1000).then(() => {
        document.getElementById("t_sensor").innerHTML = "Temperature alert: " + jsonData.t_sensor;
        document.getElementById("h_sensor").innerHTML = "Humidity alert: " + jsonData.h_sensor;
        document.getElementById("fan").innerHTML = "Fans switch: " + jsonData.fan;
        document.getElementById("light").innerHTML = "Lights switch: " + jsonData.light;
        document.getElementById("speech").innerHTML = "Speech recognition switch: " + jsonData.speech;
        document.getElementById("gpt").innerHTML = "GPT switch: " + jsonData.gpt;
        document.getElementById("info").innerHTML = "INFO: " + jsonData.info;
        document.getElementById("debug").innerHTML = "debug";
      })
    </script>
    </head>
    <body>
        <div class="wrapper">
            <nav class="navbar">
                <h1 style="color: azure; font-size: 300%; text-align: center;">GREENHOUSE MANAGEMENT</h1>
            </nav>
        </div>
        <div id="curve_chart1" class="chart1"></div>
        <div id="curve_chart2" class="chart2"></div>
        <div id="chart_div1" class="chart3"></div>
        <div id="chart_div2" class="chart4"></div>
        <div id="t_sensor" class="text"></div>
        <div id="h_sensor" class="text"></div>
        <div id="fan" class="text"></div>
        <div id="light" class="text"></div>
        <div id="speech" class="text"></div>
        <div id="gpt" class="text"></div>
        <div id="info" class="text"></div>
        <div id="debug" class="text"></div>
        <p><button onclick="lightSwitch()">Light</button></p>
        <div id="lightToggle">OFF</div>

        <script>
          function lightSwitch() {
            var x = document.getElementById("lightToggle");
            if (x.innerHTML === "OFF") {
              x.innerHTML = "ON";
            } else {
              x.innerHTML = "OFF";
            }
          }
        </script>

        <p><button onclick="fanSwitch()">Fan</button></p>
        <div id="fanToggle">OFF</div>

        <script>
          function fanSwitch() {
            var x = document.getElementById("fanToggle");
            if (x.innerHTML === "OFF") {
              x.innerHTML = "ON";
            } else {
              x.innerHTML = "OFF";
            }
          }          
        </script>
    </body>
</html>